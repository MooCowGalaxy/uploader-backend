<html lang="en-US">
<head>
    <title>mooi.ng callback</title>
    <%- include('models/header.ejs', {image: false}) %>
    <% if (valid) { %>
        <script>
            $(document).ready(() => {
                setTimeout(() => {
                    if (window.opener !== null) {
                        window.opener.location.replace('/dashboard')
                        window.close()
                    } else {
                        window.location.replace('/dashboard')
                    }
                }, 1200);
            })
        </script>
    <% } %>
</head>
<body>
<% if (valid) { %>
    <p class="text-2xl text-white mt-5 text-center">Please wait...</p>
<% } else { %>
    <p class="text-2xl text-red-300 mt-5 mb-3 text-center">There was an error while logging you in: <%= error %></p>
    <div class="flex justify-center">
        <button id="login-button" class="btn bg-teal-400 hover:bg-teal-500">Retry</button>
    </div>
<% } %>
</body>
</html>